<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판</title>
    <style>
        table {
            width: 80%;
            border-collapse: collapse;
            margin: 20px auto;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        h1 {
            text-align: center;
        }
        .new-post {
            text-align: center;
            margin: 20px;
        }
        /* 페이징 영역 가로 정렬 및 중앙 정렬 */
        .pagination {
            text-align: center;
            margin: 20px;
        }
        .pagination ul {
            list-style: none;
            padding: 0;
            margin: 0 auto;
            display: inline-block;
        }
        .pagination ul li {
            display: inline;
            margin: 0 5px;
        }
        .pagination ul li a,
        .pagination ul li span {
            display: inline-block;
            padding: 6px 12px;
            border: 1px solid #ccc;
            text-decoration: none;
            color: #333;
        }
        .pagination ul li span {
            background-color: #ddd;
            font-weight: bold;
        }


    </style>
</head>
<body>
<h1>게시판</h1>
<table>
    <thead>
    <tr>
        <th>번호</th>
        <th style="width:50px">조회수</th>
        <th>제목</th>
        <th style="width:50px">좋아요</th>
        <th>작성자</th>
        <th>작성일</th>
    </tr>
    </thead>
    <tbody>
    <!-- 게시글 목록을 반복 -->
    <tr th:each="board : ${boardList}">
        <td th:text="${board.id}"></td>
        <td th:text="${board.viewCount}"></td>
        <td>
            <a th:href="@{/post/{id}(id=${board.id})}"
               th:text="${board.title}"></a>
        </td>
        <td th:text="${board.like}"></td>
        <td th:text="${board.author}"></td>
        <td th:text="${#temporals.format(board.createAt, 'yyyy-MM-dd HH:mm')}"></td>
    </tr>
    </tbody>
</table>

<!-- 페이징 네비게이션 (10개씩 페이지 번호 표시) -->
<div class="pagination" th:if="${page.totalPage > 1}">
    <!-- th:block을 이용해 지역 변수를 선언 -->
    <th:block th:with="currentPage=${page.number},
                       totalPages=${page.totalPage},
                       startPage=${(((currentPage - 1 == 0 ? 1 : currentPage - 1) / 10) * 10) + 1},
                       endPage=${startPage + 9}">
        <ul>
            <!-- 이전 페이지 그룹 링크: startPage가 1보다 크면 이전 그룹 페이지로 이동 -->
            <li th:if="${startPage > 1}">
                <a th:href="@{/list(page=${startPage - 1})}">이전</a>
            </li>

            <!-- 페이지 번호 반복 (startPage ~ endPage), 단 totalPages 미만인 경우만 표시 -->
            <li th:each="i : ${#numbers.sequence(startPage, endPage)}" th:if="${i < totalPages}">
                <a th:if="${currentPage != i}" th:href="@{/list(page=${i})}" th:text="${i}"></a>
                <span th:if="${currentPage == i}" th:text="${i}"></span>
            </li>

            <!-- 다음 페이지 그룹 링크: endPage가 totalPages - 1보다 작으면 다음 그룹 페이지로 이동 -->
            <li th:if="${endPage < totalPages + 1}">
                <a th:href="@{/list(page=${endPage + 1})}">다음</a>
            </li>
        </ul>
    </th:block>
</div>

<div class="new-post">
    <a href="/board/new">새 글 작성하기</a>
</div>
</body>
</html>